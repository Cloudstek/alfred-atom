'use strict';var _keys=require('babel-runtime/core-js/object/keys');var _keys2=_interopRequireDefault(_keys);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var fs=require('fs');var octicons=require('octicons');var path=require('path');var atomAppName=process.env.atomAppName||'Atom';var Project=function(){function Project(){(0,_classCallCheck3.default)(this,Project);}(0,_createClass3.default)(Project,[{key:'_fileExists',value:function _fileExists(path){try{fs.statSync(path);return true;}catch(err){return false;}}},{key:'_uid',value:function _uid(project){return project.title.toLowerCase().replace(' ','_');}},{key:'_title',value:function _title(project){var title=project.title;if(project.group){title+=' - '+project.group;}return title;}},{key:'_subtitle',value:function _subtitle(project){if(project.paths){return project.paths.join(', ');}return'';}},{key:'_icon',value:function _icon(project){var iconPaths=[];if(project.icon){if(project.icon.startsWith('icon-')){var octiconNames=(0,_keys2.default)(octicons);if(octiconNames.indexOf(project.icon.slice(5))>=0){return path.join(__dirname,'icons',project.icon.slice(5)+'.png');}}if(project.icon.startsWith('~/')){var homedir=process.env.HOME||'';project.icon=path.resolve(homedir,project.icon.slice(2));}if(!path.isAbsolute(project.icon)){for(var i=0;i<project.paths.length;i++){iconPaths.push(path.resolve(project.paths[i],project.icon));}}if(this._fileExists(project.icon)){return project.icon;}}for(var _i=0;_i<project.paths.length;_i++){iconPaths.push(path.join(project.paths[_i],'icon.png'));}for(var _i2=0;_i2<iconPaths.length;_i2++){if(this._fileExists(iconPaths[_i2])){return iconPaths[_i2];}}return'icon.png';}},{key:'_openArgument',value:function _openArgument(project,app){var args=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var command=['open','-na',`"${app}"`];if(project.paths){command.push('"'+project.paths.join('" "')+'"');}if(args.length>0){command.push('--args');command=command.concat(args);}return command.join(' ');}},{key:'parse',value:function parse(project){var item={uid:new Buffer(this._title(project)+this._subtitle(project)).toString('base64'),title:this._title(project),subtitle:this._subtitle(project),icon:{path:this._icon(project)},arg:this._openArgument(project,atomAppName),valid:project.paths&&project.paths.length>0,mods:{alt:{valid:true,subtitle:'Open project path(s) in terminal',arg:this._openArgument(project,process.env.terminalApp||'Terminal')},cmd:{valid:true,subtitle:'Open in new window',arg:this._openArgument(project,atomAppName,['-n'])},ctrl:{valid:true,subtitle:'Open in development mode',arg:this._openArgument(project,atomAppName,['-d'])},fn:{valid:true,subtitle:'Append project path(s) to last open window',arg:this._openArgument(project,atomAppName,['-a'])},shift:{valid:true,subtitle:'Open project path(s) in finder',arg:this._openArgument(project,'Finder')}}};return item;}},{key:'parseAll',value:function parseAll(projects){var result=[];for(var i=0;i<projects.length;i++){result[result.length]=this.parse(projects[i]);}return result;}}]);return Project;}();module.exports=new Project();
//# sourceMappingURL=project.js.map
